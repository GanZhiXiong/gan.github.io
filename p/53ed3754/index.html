<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>11ã€ŠGoè¯­è¨€å…¥é—¨ã€‹æ•°ç»„å’Œåˆ‡ç‰‡ - å¹²å¿—é›„çš„åšå®¢</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="å¹²å¿—é›„çš„åšå®¢"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="å¹²å¿—é›„çš„åšå®¢"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="æœ¬æ–‡å†…å®¹è¾ƒå¤šï¼Œè¯·æ³¡ä¸ªèŒ¶ï¼Œåšå¥½å‡†å¤‡ï¼ é‡è¦çŸ¥è¯†ç‚¹ï¼š  Goä¸­æ²¡æœ‰foreachå…³é”®å­—ï¼Œä½†æ˜¯range å…³é”®å­—å¯ç”¨äºfor å¾ªç¯ä¸­è¿­ä»£æ•°ç»„(array)ã€åˆ‡ç‰‡(slice)ã€é€šé“(channel)æˆ–é›†åˆ(map)çš„å…ƒç´ ã€‚ _ è¡¨ç¤ºå ä½ï¼Œç”¨äºæ›¿ä»£ä¸ä½¿ç”¨çš„å˜é‡ã€‚ æ•°æ®æˆªå–è¿”å›çš„æ˜¯åˆ‡ç‰‡ã€‚ åˆ‡ç‰‡æ˜¯ä¸€ä¸ªå…±äº«å­˜å‚¨ç»“æ„ï¼Œæ˜¯å¼•ç”¨ç±»å‹ã€‚ sliceçš„lenå¤§äºcapæ—¶ï¼Œä¼šå‡ºå‘æ‰©å®¹ã€‚sliceçš„capå¢é•¿æ˜¯å½“lenåœ¨10"><meta property="og:type" content="blog"><meta property="og:title" content="11ã€ŠGoè¯­è¨€å…¥é—¨ã€‹æ•°ç»„å’Œåˆ‡ç‰‡"><meta property="og:url" content="https://ganzhixiong.com/p/53ed3754/"><meta property="og:site_name" content="å¹²å¿—é›„çš„åšå®¢"><meta property="og:description" content="æœ¬æ–‡å†…å®¹è¾ƒå¤šï¼Œè¯·æ³¡ä¸ªèŒ¶ï¼Œåšå¥½å‡†å¤‡ï¼ é‡è¦çŸ¥è¯†ç‚¹ï¼š  Goä¸­æ²¡æœ‰foreachå…³é”®å­—ï¼Œä½†æ˜¯range å…³é”®å­—å¯ç”¨äºfor å¾ªç¯ä¸­è¿­ä»£æ•°ç»„(array)ã€åˆ‡ç‰‡(slice)ã€é€šé“(channel)æˆ–é›†åˆ(map)çš„å…ƒç´ ã€‚ _ è¡¨ç¤ºå ä½ï¼Œç”¨äºæ›¿ä»£ä¸ä½¿ç”¨çš„å˜é‡ã€‚ æ•°æ®æˆªå–è¿”å›çš„æ˜¯åˆ‡ç‰‡ã€‚ åˆ‡ç‰‡æ˜¯ä¸€ä¸ªå…±äº«å­˜å‚¨ç»“æ„ï¼Œæ˜¯å¼•ç”¨ç±»å‹ã€‚ sliceçš„lenå¤§äºcapæ—¶ï¼Œä¼šå‡ºå‘æ‰©å®¹ã€‚sliceçš„capå¢é•¿æ˜¯å½“lenåœ¨10"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/ganzhixiong/img/blog/20210708161126.png"><meta property="article:published_time" content="2021-01-19T09:50:27.000Z"><meta property="article:modified_time" content="2021-09-14T07:31:28.245Z"><meta property="article:author" content="å¹²å¿—é›„"><meta property="article:tag" content="Go"><meta property="article:tag" content="Slice"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="https://cdn.jsdelivr.net/gh/ganzhixiong/img/blog/20210708161126.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://ganzhixiong.com/p/53ed3754/"},"headline":"11ã€ŠGoè¯­è¨€å…¥é—¨ã€‹æ•°ç»„å’Œåˆ‡ç‰‡","image":["https://cdn.jsdelivr.net/gh/ganzhixiong/img/blog/20210708161126.png"],"datePublished":"2021-01-19T09:50:27.000Z","dateModified":"2021-09-14T07:31:28.245Z","author":{"@type":"Person","name":"å¹²å¿—é›„"},"publisher":{"@type":"Organization","name":"å¹²å¿—é›„çš„åšå®¢","logo":{"@type":"ImageObject","url":{"text":"ğŸ¤Ÿ Gan's Blog ğŸ¸"}}},"description":"æœ¬æ–‡å†…å®¹è¾ƒå¤šï¼Œè¯·æ³¡ä¸ªèŒ¶ï¼Œåšå¥½å‡†å¤‡ï¼ é‡è¦çŸ¥è¯†ç‚¹ï¼š  Goä¸­æ²¡æœ‰foreachå…³é”®å­—ï¼Œä½†æ˜¯range å…³é”®å­—å¯ç”¨äºfor å¾ªç¯ä¸­è¿­ä»£æ•°ç»„(array)ã€åˆ‡ç‰‡(slice)ã€é€šé“(channel)æˆ–é›†åˆ(map)çš„å…ƒç´ ã€‚ _ è¡¨ç¤ºå ä½ï¼Œç”¨äºæ›¿ä»£ä¸ä½¿ç”¨çš„å˜é‡ã€‚ æ•°æ®æˆªå–è¿”å›çš„æ˜¯åˆ‡ç‰‡ã€‚ åˆ‡ç‰‡æ˜¯ä¸€ä¸ªå…±äº«å­˜å‚¨ç»“æ„ï¼Œæ˜¯å¼•ç”¨ç±»å‹ã€‚ sliceçš„lenå¤§äºcapæ—¶ï¼Œä¼šå‡ºå‘æ‰©å®¹ã€‚sliceçš„capå¢é•¿æ˜¯å½“lenåœ¨10"}</script><link rel="canonical" href="https://ganzhixiong.com/p/53ed3754/"><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.14.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.2.0/styles/xt256.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Oxanium:wght@300;400;600&amp;family=Roboto+Mono"><link rel="stylesheet" href="/css/cyberpunk.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><!--!--><!--!--><meta name="generator" content="Hexo 5.4.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">ğŸ¤Ÿ Gan&#039;s Blog ğŸ¸</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a><a class="navbar-item" target="_blank" rel="noopener" href="https://wekan.ganzhixiong.com/">Wekan</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="å¹²å¿—é›„çš„GitHub" href="https://github.com/ganzhixiong"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="Catalogue" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-01-19T09:50:27.000Z" title="2021/1/19 17:50:27">2021-01-19</time></span><span class="level-item">Updated&nbsp;<time dateTime="2021-09-14T07:31:28.245Z" title="2021/9/14 15:31:28">2021-09-14</time></span><span class="level-item"><a class="link-muted article-categories" href="/categories/Go/">Go</a><span>Â /Â </span><a class="link-muted article-categories" href="/categories/Go/Go%E8%AF%AD%E8%A8%80%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A/">Goè¯­è¨€å…¥é—¨åˆ°ç²¾é€š</a></span><span class="level-item">21 minutes read (About 3176 words)</span></div></div><h1 class="title is-3 is-size-4-mobile">11ã€ŠGoè¯­è¨€å…¥é—¨ã€‹æ•°ç»„å’Œåˆ‡ç‰‡</h1><div class="content"><p>æœ¬æ–‡å†…å®¹è¾ƒå¤šï¼Œè¯·æ³¡ä¸ªèŒ¶ï¼Œåšå¥½å‡†å¤‡ï¼</p>
<p><em>é‡è¦çŸ¥è¯†ç‚¹ï¼š</em></p>
<ul>
<li>Goä¸­æ²¡æœ‰foreachå…³é”®å­—ï¼Œä½†æ˜¯<em>range</em> å…³é”®å­—å¯ç”¨äºfor å¾ªç¯ä¸­è¿­ä»£æ•°ç»„(array)ã€åˆ‡ç‰‡(slice)ã€é€šé“(channel)æˆ–é›†åˆ(map)çš„å…ƒç´ ã€‚</li>
<li><code>_</code> è¡¨ç¤ºå ä½ï¼Œç”¨äºæ›¿ä»£ä¸ä½¿ç”¨çš„å˜é‡ã€‚</li>
<li>æ•°æ®æˆªå–è¿”å›çš„æ˜¯åˆ‡ç‰‡ã€‚</li>
<li>åˆ‡ç‰‡æ˜¯ä¸€ä¸ª<strong>å…±äº«å­˜å‚¨ç»“æ„</strong>ï¼Œæ˜¯å¼•ç”¨ç±»å‹ã€‚</li>
<li>sliceçš„lenå¤§äºcapæ—¶ï¼Œä¼šå‡ºå‘æ‰©å®¹ã€‚sliceçš„capå¢é•¿æ˜¯å½“lenåœ¨1024ä¹‹å‰æ˜¯åŒå€å¢é•¿çš„ï¼Œè€Œ1024ä»¥ååˆ™æ˜¯å…ˆå¢é•¿25%ä»¥åå†è°ƒæ•´è¿™ä¸ªå€¼ä¸ºç³»ç»Ÿéœ€è¦çš„æœ€å°å€¼ï¼Œå› æ­¤è¿™ä¸ªå€¼æ˜¯çº¦ç­‰äºcap + cap/4ã€‚</li>
</ul>
<span id="more"></span>

<blockquote>
<p>âš¡ï¸è¿™æ˜¯æˆ‘çº¯æ‰‹å†™çš„ã€ŠGoè¯­è¨€å…¥é—¨ã€‹ï¼Œæºç +æ–‡ç« ï¼Œæ‰‹æŠŠæ‰‹æ•™ä½ å…¥é—¨Goã€‚çœ‹äº†ä½ å°±ä¼šï¼<br>âš¡ï¸æ–‡ç« ä¸­æ‰€æœ‰çš„ä»£ç æˆ‘éƒ½æ”¾åˆ°äº† <a target="_blank" rel="noopener" href="https://github.com/GanZhiXiong/go_learning">github.com/GanZhiXiong/go_learning</a> è¿™ä¸ªä»“åº“ä¸­ï¼<br>âš¡ï¸çœ‹æ–‡ç« æ—¶ï¼Œå¯¹ç…§ä»“åº“ä¸­ä»£ç å­¦ä¹ æ•ˆæœæ›´ä½³å“¦ï¼</p>
</blockquote>
<h2 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h2><h3 id="æ•°ç»„çš„å£°æ˜"><a href="#æ•°ç»„çš„å£°æ˜" class="headerlink" title="æ•°ç»„çš„å£°æ˜"></a>æ•°ç»„çš„å£°æ˜</h3><ul>
<li><p>å£°æ˜æŒ‡å®šé•¿åº¦æ•°ç»„ï¼Œå¹¶åˆå§‹åŒ–ä¸ºé»˜è®¤0å€¼ã€‚</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a [<span class="number">3</span>]<span class="keyword">int</span></span><br><span class="line">a[<span class="number">0</span>] = <span class="number">1</span></span><br></pre></td></tr></table></figure></li>
<li><p>å£°æ˜æŒ‡å®šé•¿åº¦æ•°ç»„ï¼ŒåŒæ—¶åˆå§‹åŒ–</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸€ç»´æ•°ç»„</span></span><br><span class="line">b := [<span class="number">3</span>]<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line"><span class="comment">// äºŒç»´æ•°ç»„</span></span><br><span class="line">c := [<span class="number">2</span>][<span class="number">2</span>]<span class="keyword">int</span>&#123;&#123;<span class="number">1</span>, <span class="number">2</span>&#125;, &#123;<span class="number">3</span>, <span class="number">4</span>&#125;&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>å£°æ˜åˆå§‹åŒ–æ•°ç»„æ—¶ä¸å†™é•¿åº¦</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a := [...]<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="éå†æ•°ç»„"><a href="#éå†æ•°ç»„" class="headerlink" title="éå†æ•°ç»„"></a>éå†æ•°ç»„</h3><p>ä¸Šä¸€ç¯‡æˆ‘ä»¬å­¦ä¹ çŸ¥é“äº†<strong>Goä»…æ”¯æŒå¾ªç¯å…³é”®å­—for</strong>ã€‚<br>é‚£ä¹ˆéå†æ•°ç»„è‚¯å®šæ˜¯forã€‚</p>
<h4 id="forå¾ªç¯"><a href="#forå¾ªç¯" class="headerlink" title="forå¾ªç¯"></a>forå¾ªç¯</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(a); i++ &#123;</span><br><span class="line">	t.Log(a[i])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="foreachå¾ªç¯"><a href="#foreachå¾ªç¯" class="headerlink" title="foreachå¾ªç¯"></a>foreachå¾ªç¯</h4><p>è™½ç„¶Goä¸­æ²¡æœ‰foreachå…³é”®å­—ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥åˆ©ç”¨forå…³é”®å­—æ¥å®ç°ç±»å‹foreachå¾ªç¯ã€‚</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> index, e := <span class="keyword">range</span> a &#123;</span><br><span class="line">	t.Log(index, e)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>éœ€è¦æ³¨æ„æ˜¯ç´¢å¼•ä¸èƒ½çœç•¥ï¼Œä½†æ˜¯å¯ä»¥â€œ_â€æ¥è¡¨ç¤ºå ä½ï¼Œè¿™æ ·å°±èƒ½å³ä½¿ä¸ä½¿ç”¨indexï¼Œä¹Ÿä¸ä¼šæŠ¥é”™ã€‚</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> _, e := <span class="keyword">range</span> a &#123;</span><br><span class="line">	t.Log(e)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸‹é¢æˆ‘ç”¨ä»£ç æ¥æ¼”ç¤ºforå¾ªç¯å’Œforå®ç°çš„foreachå¾ªç¯ï¼š</p>
<figure class="highlight go"><figcaption><span>11_array_test.go</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestArrayEach</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	a := [<span class="number">3</span>]<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(a); i++ &#123;</span><br><span class="line">		t.Log(a[i])</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// é‚£æœ‰æ²¡æœ‰ç±»å‹Javaæˆ–C#ä¸­çš„foreach: foreach(int i in a)ï¼Œä¹Ÿæ˜¯æœ‰çš„</span></span><br><span class="line">	<span class="keyword">for</span> index, e := <span class="keyword">range</span> a &#123;</span><br><span class="line">		t.Log(index, e)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// é‚£æˆ‘ä»¬å¯ä¸å¯ä»¥çœç•¥index?</span></span><br><span class="line">	<span class="keyword">for</span> e := <span class="keyword">range</span> a &#123;</span><br><span class="line">		<span class="comment">// é€šè¿‡è¾“å‡ºç»“æœå¯ä»¥çœ‹åˆ°eæ˜¯ç´¢å¼•</span></span><br><span class="line">		t.Log(e)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// å¥½å§ï¼Œé‚£æˆ‘æŠŠindexå†™ä¸Šï¼Œä½†æ˜¯æˆ‘ä¸ç”¨å®ƒè¡Œä¸ï¼Ÿè¿™æ ·è‚¯å®šä¸è¡Œå•Šï¼Œä¼šæŠ¥é”™ï¼šUnused variable &#x27;index&#x27;</span></span><br><span class="line">	<span class="comment">// Goä¸­å¯ä»¥â€œ_â€è¡¨ç¤ºå ä½ï¼Œä¸ä½¿ç”¨å®ƒä¹Ÿä¸ä¼šæŠ¥é”™</span></span><br><span class="line">	<span class="keyword">for</span> _, e := <span class="keyword">range</span> a &#123;</span><br><span class="line">		t.Log(e)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ•°ç»„æˆªå–"><a href="#æ•°ç»„æˆªå–" class="headerlink" title="æ•°ç»„æˆªå–"></a>æ•°ç»„æˆªå–</h3><p>è¿™ä¸ªå¾ˆå¥½ç†è§£ï¼Œè¯·ç›´æ¥ä»£ç ï¼š</p>
<figure class="highlight go"><figcaption><span>11_array_test.go</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestArraySection</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	a := [...]<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br><span class="line">	t.Log(a, reflect.TypeOf(a))</span><br><span class="line"></span><br><span class="line">	<span class="comment">// æ•°ç»„æˆªå–ï¼ša[å¼€å§‹ç´¢å¼•(åŒ…å«), ä¸åŒ…å«(ä¸åŒ…å«)]</span></span><br><span class="line">	b := a[<span class="number">1</span>:<span class="number">2</span>]</span><br><span class="line">	t.Log(b, reflect.TypeOf(b)) <span class="comment">// 2</span></span><br><span class="line">	t.Log(a[<span class="number">1</span>:<span class="number">3</span>]) <span class="comment">// 2 3</span></span><br><span class="line">	t.Log(a[<span class="number">1</span>:]) <span class="comment">// 2 3 4 5</span></span><br><span class="line">	t.Log(a[:<span class="number">3</span>]) <span class="comment">// 1 2 3</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">=== RUN   TestArraySection</span><br><span class="line">    <span class="number">11</span>_array_test.<span class="keyword">go</span>:<span class="number">52</span>: [<span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span>] [<span class="number">5</span>]<span class="keyword">int</span></span><br><span class="line">    <span class="number">11</span>_array_test.<span class="keyword">go</span>:<span class="number">56</span>: [<span class="number">2</span>] []<span class="keyword">int</span></span><br><span class="line">    <span class="number">11</span>_array_test.<span class="keyword">go</span>:<span class="number">57</span>: [<span class="number">2</span> <span class="number">3</span>] []<span class="keyword">int</span></span><br><span class="line">    <span class="number">11</span>_array_test.<span class="keyword">go</span>:<span class="number">58</span>: [<span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span>]</span><br><span class="line">    <span class="number">11</span>_array_test.<span class="keyword">go</span>:<span class="number">59</span>: [<span class="number">1</span> <span class="number">2</span> <span class="number">3</span>]</span><br><span class="line">--- PASS: TestArraySection (<span class="number">0.00</span>s)</span><br></pre></td></tr></table></figure>

<p><strong>è¿™é‡Œæˆ‘ä»¬éœ€è¦æ³¨æ„æ˜¯ï¼Œæ•°ç»„æˆªå–åå°±å˜æˆäº†sliceåˆ‡ç‰‡äº†ã€‚</strong></p>
<h2 id="åˆ‡ç‰‡"><a href="#åˆ‡ç‰‡" class="headerlink" title="åˆ‡ç‰‡"></a>åˆ‡ç‰‡</h2><p>åˆ‡ç‰‡ä¹Ÿæ˜¯ä¸€ä¸ªè¿ç»­å­˜å‚¨çš„æ•°æ®ç»“æ„ã€‚</p>
<h3 id="åˆ‡ç‰‡å†…éƒ¨ç»“æ„"><a href="#åˆ‡ç‰‡å†…éƒ¨ç»“æ„" class="headerlink" title="åˆ‡ç‰‡å†…éƒ¨ç»“æ„"></a>åˆ‡ç‰‡å†…éƒ¨ç»“æ„</h3><p>å®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç»“æ„ä½“ã€‚<br>è¯¥ç»“æ„ä½“åŒ…æ‹¬ä¸‰ä¸ªåŸºæœ¬å…ƒç´ ï¼Œåˆ†åˆ«æ˜¯ptrã€lenã€capï¼š</p>
<ul>
<li>ptræŒ‡é’ˆï¼šæŒ‡å‘è¿ç»­çš„å­˜å‚¨ç©ºé—´ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªæ•°ç»„ã€‚</li>
<li>len å­˜äº†å¤šå°‘ä¸ªå…ƒç´ ä¸ªæ•°ã€‚</li>
<li>cap å³capacityï¼ŒæŒ‡å¯ä»¥å­˜å¤šå°‘ä¸ªå…ƒç´ ã€‚æŒ‡é’ˆæŒ‡å‘çš„åç«¯è¿™ä¸ªæ•°ç»„ç©ºé—´é•¿åº¦ï¼Œæ¯”å¦‚5ä¸ªå…ƒç´ çš„æ•°ç»„ï¼Œè¿™ä¸ªcapå¯ä»¥æ˜¯5ã€‚</li>
</ul>
<p>æ¦‚å¿µä¼¼ä¹å¾ˆéš¾ç†è§£ï¼Œä¸‹é¢æˆ‘ç”¨ä»£ç æ¥è®²è§£æ€ä¹ˆåˆ›å»ºåˆ‡ç‰‡ä»¥åŠlenå’Œcapçš„åŒºåˆ«ï¼š</p>
<figure class="highlight go"><figcaption><span>11_slice_test.go</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestSliceInit</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	<span class="comment">// å£°æ˜</span></span><br><span class="line">	<span class="keyword">var</span> s0 []<span class="keyword">int</span></span><br><span class="line">	t.Log(s0, <span class="built_in">len</span>(s0), <span class="built_in">cap</span>(s0))</span><br><span class="line">	s0 = <span class="built_in">append</span>(s0, <span class="number">1</span>)</span><br><span class="line">	t.Log(s0, <span class="built_in">len</span>(s0), <span class="built_in">cap</span>(s0))</span><br><span class="line">	t.Log(<span class="string">&quot;\r&quot;</span>)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// å£°æ˜å¹¶åˆå§‹åŒ–</span></span><br><span class="line">	s1 := []<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line">	t.Log(s1, <span class="built_in">len</span>(s1), <span class="built_in">cap</span>(s1))</span><br><span class="line">	s1 = <span class="built_in">append</span>(s1, <span class="number">5</span>)</span><br><span class="line">	t.Log(s1, <span class="built_in">len</span>(s1), <span class="built_in">cap</span>(s1))</span><br><span class="line">	t.Log(<span class="string">&quot;\r&quot;</span>)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// ä½¿ç”¨makeåˆ›å»º</span></span><br><span class="line">	<span class="comment">// å¦‚æœlenå¤§äºcapåˆ™ä¼šæŠ¥é”™ï¼šlarger than cap in make([]int)</span></span><br><span class="line">	<span class="comment">//s2 := make([]int, 3, 0)</span></span><br><span class="line">	s2 := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">3</span>, <span class="number">3</span>)</span><br><span class="line">	t.Log(s2, <span class="built_in">len</span>(s2), <span class="built_in">cap</span>(s2))</span><br><span class="line">	<span class="comment">// panic: runtime error: index out of range [3] with length 3 [recovered]</span></span><br><span class="line">	<span class="comment">//	panic: runtime error: index out of range [3] with length 3</span></span><br><span class="line">	<span class="comment">//t.Log(s2[0], s2[1], s2[2], s2[3], s2[4])</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line">		s2 = <span class="built_in">append</span>(s2, i)</span><br><span class="line">		t.Log(s2, <span class="built_in">len</span>(s2), <span class="built_in">cap</span>(s2))</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">=== RUN   TestSliceInit</span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">8</span>: [] <span class="number">0</span> <span class="number">0</span></span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">10</span>: [<span class="number">1</span>] <span class="number">1</span> <span class="number">1</span></span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">11</span>: </span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">15</span>: [<span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span>] <span class="number">4</span> <span class="number">4</span></span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">17</span>: [<span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span>] <span class="number">5</span> <span class="number">8</span></span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">18</span>: </span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">24</span>: [<span class="number">0</span> <span class="number">0</span> <span class="number">0</span>] <span class="number">3</span> <span class="number">3</span></span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">30</span>: [<span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>] <span class="number">4</span> <span class="number">6</span></span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">30</span>: [<span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span>] <span class="number">5</span> <span class="number">6</span></span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">30</span>: [<span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">2</span>] <span class="number">6</span> <span class="number">6</span></span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">30</span>: [<span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span>] <span class="number">7</span> <span class="number">12</span></span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">30</span>: [<span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span>] <span class="number">8</span> <span class="number">12</span></span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">30</span>: [<span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span>] <span class="number">9</span> <span class="number">12</span></span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">30</span>: [<span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span>] <span class="number">10</span> <span class="number">12</span></span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">30</span>: [<span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span>] <span class="number">11</span> <span class="number">12</span></span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">30</span>: [<span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span>] <span class="number">12</span> <span class="number">12</span></span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">30</span>: [<span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span> <span class="number">9</span>] <span class="number">13</span> <span class="number">24</span></span><br><span class="line">--- PASS: TestSliceInit (<span class="number">0.00</span>s)</span><br></pre></td></tr></table></figure>
<p>ä»ä¸Šé¢çš„ä»£ç çš„è¾“å‡ºç»“æœå¯ä»¥å¾—å‡ºï¼š</p>
<ul>
<li><strong>lenä¸º0ï¼Œcapacityä¹Ÿä¸º0ï¼›</strong></li>
<li><strong>åˆå§‹åŒ–åçš„åˆ‡ç‰‡ï¼Œcapacityç­‰äºlen</strong></li>
<li><strong>capacityå¿…é¡»å¤§äºæˆ–ç­‰äºlenï¼›</strong></li>
<li><strong>å¦‚æœlenå¢é•¿äº†ï¼Œcapacityä¸ä¸€å®šå¢é•¿ï¼›</strong></li>
<li><strong>å¦‚æœå­˜æ”¾ä¸ä¸‹äº†å…ƒç´ ï¼Œcapacityåˆ™ä¼šä»¥2å€å¢é•¿ã€‚</strong></li>
</ul>
<p>ä¸‹é¢ç”¨ä»£ç å†æ¼”ç¤ºä¸‹ï¼š</p>
<figure class="highlight go"><figcaption><span>11_slice_test.go</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestSliceGrowing</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	s := []<span class="keyword">int</span>&#123;&#125;</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line">		s = <span class="built_in">append</span>(s, i)</span><br><span class="line">		t.Log(s, <span class="built_in">len</span>(s), <span class="built_in">cap</span>(s))</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">=== RUN   TestSliceGrowing</span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">38</span>: [<span class="number">0</span>] <span class="number">1</span> <span class="number">1</span></span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">38</span>: [<span class="number">0</span> <span class="number">1</span>] <span class="number">2</span> <span class="number">2</span></span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">38</span>: [<span class="number">0</span> <span class="number">1</span> <span class="number">2</span>] <span class="number">3</span> <span class="number">4</span></span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">38</span>: [<span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span>] <span class="number">4</span> <span class="number">4</span></span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">38</span>: [<span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span>] <span class="number">5</span> <span class="number">8</span></span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">38</span>: [<span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span>] <span class="number">6</span> <span class="number">8</span></span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">38</span>: [<span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span>] <span class="number">7</span> <span class="number">8</span></span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">38</span>: [<span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span>] <span class="number">8</span> <span class="number">8</span></span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">38</span>: [<span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span>] <span class="number">9</span> <span class="number">16</span></span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">38</span>: [<span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span> <span class="number">9</span>] <span class="number">10</span> <span class="number">16</span></span><br><span class="line">--- PASS: TestSliceGrowing (<span class="number">0.00</span>s)</span><br></pre></td></tr></table></figure>

<p>ä¸çŸ¥ä½ ä»¬æœ‰æ²¡æœ‰æƒ³è¿‡è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼š<br>å¦‚æœä¸€ç›´ä»¥2å€å¢é•¿ï¼Œé‚£æ ·å†…å­˜æ¶ˆè€—å°†ä¼šè¶Šæ¥è¶Šå¤§ï¼Œè¿™æ ·çš„å¢é•¿è‚¯å®šæ˜¯ä¸åˆç†çš„ã€‚<br>ä¸‹é¢æˆ‘å°†é€šè¿‡Goçš„æºç æ¥åˆ†æcapacityå¢é•¿è§„åˆ™ã€‚</p>
<h3 id="capacityå¢é•¿è§„åˆ™"><a href="#capacityå¢é•¿è§„åˆ™" class="headerlink" title="capacityå¢é•¿è§„åˆ™"></a>capacityå¢é•¿è§„åˆ™</h3><figure class="highlight go"><figcaption><span>11_slice_test.go</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestSliceCapGrowthRules</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	s := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">0</span>)</span><br><span class="line">	n := <span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span> n &lt; <span class="number">1500</span> &#123;</span><br><span class="line">		s = <span class="built_in">append</span>(s, n)</span><br><span class="line"></span><br><span class="line">		t.Log(color.White, <span class="built_in">len</span>(s), <span class="built_in">cap</span>(s))</span><br><span class="line">		<span class="keyword">if</span> <span class="built_in">len</span>(s)+<span class="number">1</span> &gt; <span class="built_in">cap</span>(s) &#123;</span><br><span class="line">			t.Log(color.Red, <span class="string">&quot;ä¸‹ä¸€ä¸ªappendå°†æ‰©å®¹&quot;</span>)</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		n++</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸‹é¢çš„è¾“å‡ºï¼Œcapacityæ˜¯2å€å¢é•¿ï¼Œç¬¦åˆä¸Šä¸€èŠ‚çš„æ€»ç»“ã€‚</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">=== RUN   TestSliceCapGrowthRules</span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">54</span>:  <span class="number">1</span> <span class="number">1</span></span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">56</span>:  ä¸‹ä¸€ä¸ª<span class="built_in">append</span>å°†æ‰©å®¹</span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">54</span>:  <span class="number">2</span> <span class="number">2</span></span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">56</span>:  ä¸‹ä¸€ä¸ª<span class="built_in">append</span>å°†æ‰©å®¹</span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">54</span>:  <span class="number">3</span> <span class="number">4</span></span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">54</span>:  <span class="number">4</span> <span class="number">4</span></span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">56</span>:  ä¸‹ä¸€ä¸ª<span class="built_in">append</span>å°†æ‰©å®¹</span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">54</span>:  <span class="number">5</span> <span class="number">8</span></span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">54</span>:  <span class="number">6</span> <span class="number">8</span></span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">54</span>:  <span class="number">7</span> <span class="number">8</span></span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">54</span>:  <span class="number">8</span> <span class="number">8</span></span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">56</span>:  ä¸‹ä¸€ä¸ª<span class="built_in">append</span>å°†æ‰©å®¹</span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">54</span>:  <span class="number">9</span> <span class="number">16</span></span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">54</span>:  <span class="number">10</span> <span class="number">16</span></span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">54</span>:  <span class="number">11</span> <span class="number">16</span></span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">54</span>:  <span class="number">12</span> <span class="number">16</span></span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">54</span>:  <span class="number">13</span> <span class="number">16</span></span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">54</span>:  <span class="number">14</span> <span class="number">16</span></span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">54</span>:  <span class="number">15</span> <span class="number">16</span></span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">54</span>:  <span class="number">16</span> <span class="number">16</span></span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">56</span>:  ä¸‹ä¸€ä¸ª<span class="built_in">append</span>å°†æ‰©å®¹</span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">54</span>:  <span class="number">17</span> <span class="number">32</span></span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">54</span>:  <span class="number">18</span> <span class="number">32</span></span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">54</span>:  <span class="number">19</span> <span class="number">32</span></span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">54</span>:  <span class="number">20</span> <span class="number">32</span></span><br><span class="line">    ...</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯å½“lenå¤§äº1024çš„æ—¶å€™ï¼Œcapacityå´å˜æˆäº†1280ï¼Œä¸æ˜¯ä¸¤å€å¢é•¿äº†ã€‚</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">54</span>:  <span class="number">1020</span> <span class="number">1024</span></span><br><span class="line"><span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">54</span>:  <span class="number">1021</span> <span class="number">1024</span></span><br><span class="line"><span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">54</span>:  <span class="number">1022</span> <span class="number">1024</span></span><br><span class="line"><span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">54</span>:  <span class="number">1023</span> <span class="number">1024</span></span><br><span class="line"><span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">54</span>:  <span class="number">1024</span> <span class="number">1024</span></span><br><span class="line"><span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">56</span>:  ä¸‹ä¸€ä¸ª<span class="built_in">append</span>å°†æ‰©å®¹</span><br><span class="line"><span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">54</span>:  <span class="number">1025</span> <span class="number">1280</span></span><br><span class="line"><span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">54</span>:  <span class="number">1026</span> <span class="number">1280</span></span><br><span class="line"><span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">54</span>:  <span class="number">1027</span> <span class="number">1280</span></span><br><span class="line"><span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">54</span>:  <span class="number">1028</span> <span class="number">1280</span></span><br><span class="line"><span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">54</span>:  <span class="number">1029</span> <span class="number">1280</span></span><br><span class="line"><span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">54</span>:  <span class="number">1030</span> <span class="number">1280</span></span><br></pre></td></tr></table></figure>

<p>çœ‹æ¥å¾—çœ‹ä¸‹Goçš„æºç äº†ã€‚<br>æ‰“å¼€<code>$GOROOT/src/runtime/slice.go</code>ï¼Œåœ¨growsliceå‡½æ•°å¯ä»¥çœ‹åˆ°è®¡ç®— <code>newcap</code>çš„ç®—æ³•ã€‚<br>ç®—æ³•åˆ†ä¸ºä¸¤æ­¥ï¼š</p>
<ol>
<li>é¢„ä¼°å®¹é‡</li>
<li>å†…å­˜å¯¹é½</li>
</ol>
<h4 id="ç¬¬ä¸€æ­¥ï¼Œé¢„ä¼°æ–°å®¹é‡"><a href="#ç¬¬ä¸€æ­¥ï¼Œé¢„ä¼°æ–°å®¹é‡" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼Œé¢„ä¼°æ–°å®¹é‡"></a>ç¬¬ä¸€æ­¥ï¼Œé¢„ä¼°æ–°å®¹é‡</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/runtime/slice.go</span></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">å‚æ•°åˆ†æï¼š</span></span><br><span class="line"><span class="comment">	old æ˜¯è€åˆ‡ç‰‡</span></span><br><span class="line"><span class="comment">	cap æ˜¯æ–°åˆ‡ç‰‡å®¹é‡çš„æœ€å°å€¼ï¼ˆå³æ—§åˆ‡ç‰‡çš„å®¹é‡åŠ ä¸Šæ–°åŠ å…¥å…ƒç´ çš„æ•°é‡ï¼‰</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">growslice</span><span class="params">(et *_type, old slice, <span class="built_in">cap</span> <span class="keyword">int</span>)</span> <span class="title">slice</span></span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 1. é¢„ä¼°å®¹é‡</span></span><br><span class="line">    newcap := old.<span class="built_in">cap</span></span><br><span class="line">    doublecap := newcap + newcap</span><br><span class="line">    <span class="comment">// é¦–å…ˆåˆ¤æ–­ï¼Œå¦‚æœæ–°åˆ‡ç‰‡å®¹é‡çš„æœ€å°å€¼ï¼ˆcapï¼‰å¤§äº2å€çš„æ—§å®¹é‡ï¼ˆold.capï¼‰ï¼Œåˆ™capä¸ºæ–°å®¹é‡ï¼ˆnewcapï¼‰ã€‚</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">cap</span> &gt; doublecap &#123;</span><br><span class="line">      	newcap = <span class="built_in">cap</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœæ—§åˆ‡ç‰‡çš„é•¿åº¦å°äº1024ï¼Œåˆ™æœ€æ–°å®¹é‡å°±æ˜¯æ—§å®¹é‡çš„ä¸¤å€ï¼Œå³ newcap=doublecapã€‚</span></span><br><span class="line">        <span class="keyword">if</span> old.<span class="built_in">len</span> &lt; <span class="number">1024</span> &#123;</span><br><span class="line">        		newcap = doublecap</span><br><span class="line">      	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        	  <span class="comment">// å¦åˆ™æ–°å®¹é‡ä»¥æ—§å®¹é‡æ¯æ¬¡å¢é•¿25%ï¼Œç›´åˆ°æ–°å®¹é‡ï¼ˆnewcapï¼‰å¤§äºæˆ–ç­‰äºæ–°åˆ‡ç‰‡å®¹é‡çš„æœ€å°å€¼ã€‚</span></span><br><span class="line">        <span class="comment">// Check 0 &lt; newcap to detect overflow</span></span><br><span class="line">        <span class="comment">// and prevent an infinite loop.</span></span><br><span class="line">        <span class="keyword">for</span> <span class="number">0</span> &lt; newcap &amp;&amp; newcap &lt; <span class="built_in">cap</span> &#123;</span><br><span class="line">          newcap += newcap / <span class="number">4</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¦‚æœæ–°å®¹é‡è®¡ç®—å€¼æº¢å‡ºï¼Œåˆ™æ–°å®¹é‡ä¸ºæ–°åˆ‡ç‰‡å®¹é‡çš„æœ€å°å€¼ã€‚</span></span><br><span class="line">        <span class="comment">// Set newcap to the requested cap when</span></span><br><span class="line">        <span class="comment">// the newcap calculation overflowed.</span></span><br><span class="line">        <span class="keyword">if</span> newcap &lt;= <span class="number">0</span> &#123;</span><br><span class="line">          newcap = <span class="built_in">cap</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// 2. å†…å­˜å¯¹é½</span></span><br><span class="line">    roundupsize...</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/ganzhixiong/img/blog/20210708161126.png" alt="image-20210708161121535"></p>
<p>é¢„ä¼°å®¹é‡åªæ˜¯é¢„ä¼°çš„å…ƒç´ â€œä¸ªæ•°â€ã€‚<br>é‚£éœ€è¦å ç”¨å¤šå°‘å†…å­˜å‘¢ï¼Ÿ</p>
<h4 id="ç¬¬äºŒæ­¥ï¼Œå†…å­˜å¯¹é½"><a href="#ç¬¬äºŒæ­¥ï¼Œå†…å­˜å¯¹é½" class="headerlink" title="ç¬¬äºŒæ­¥ï¼Œå†…å­˜å¯¹é½"></a>ç¬¬äºŒæ­¥ï¼Œå†…å­˜å¯¹é½</h4><p>å†…å­˜å ç”¨ = é¢„ä¼°å®¹é‡ * å…ƒç´ ç±»å‹å¤§å°ã€‚</p>
<p>ä¸è¿‡ï¼Œç”±äº Go è¯­è¨€çš„å†…å­˜åˆ†é…æ˜¯ç”±å…¶ runtime æ¥ç®¡ç†çš„ï¼Œç¨‹åºå¹¶ä¸æ˜¯ç›´æ¥å’Œæ“ä½œç³»ç»Ÿæ‰“äº¤é“ã€‚<br>åœ¨ç¨‹åºå¯åŠ¨æ—¶ï¼Œruntime ä¼šæå‰å‘æ“ä½œç³»ç»Ÿç”³è¯·ä¸€æ‰¹å†…å­˜ï¼ŒæŒ‰ç…§ä¸åŒçš„è§„æ ¼ç®¡ç†èµ·æ¥ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼ˆé‡ç‚¹çœ‹ <strong>bytes/obj</strong> è¿™åˆ—ï¼‰ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/runtime/sizeclasses.go</span></span><br><span class="line"><span class="comment">// Code generated by mksizeclasses.go; DO NOT EDIT.</span></span><br><span class="line"><span class="comment">//go:generate go run mksizeclasses.go</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> runtime</span><br><span class="line"></span><br><span class="line"><span class="comment">// class  bytes/obj  bytes/span  objects  tail waste  max waste</span></span><br><span class="line"><span class="comment">//     1          8        8192     1024           0     87.50%</span></span><br><span class="line"><span class="comment">//     2         16        8192      512           0     43.75%</span></span><br><span class="line"><span class="comment">//     3         32        8192      256           0     46.88%</span></span><br><span class="line"><span class="comment">//     4         48        8192      170          32     31.52%</span></span><br><span class="line"><span class="comment">//     5         64        8192      128           0     23.44%</span></span><br><span class="line"><span class="comment">//     6         80        8192      102          32     19.07%</span></span><br><span class="line"><span class="comment">//     7         96        8192       85          32     15.95%</span></span><br><span class="line"><span class="comment">//     8        112        8192       73          16     13.56%</span></span><br><span class="line"><span class="comment">//     9        128        8192       64           0     11.72%</span></span><br><span class="line"><span class="comment">//    10        144        8192       56         128     11.82%</span></span><br><span class="line"><span class="comment">//    11        160        8192       51          32      9.73%</span></span><br><span class="line"><span class="comment">//  ......</span></span><br><span class="line"><span class="comment">//    23        448        8192       18         128      8.37%</span></span><br><span class="line"><span class="comment">//    24        480        8192       17          32      6.82%</span></span><br><span class="line"><span class="comment">//    25        512        8192       16           0      6.05%</span></span><br><span class="line"><span class="comment">//    26        576        8192       14         128     12.33%</span></span><br><span class="line"><span class="comment">//  ......</span></span><br></pre></td></tr></table></figure>

<p>å½“ç¨‹åºå‘ runtime ç”³è¯·å†…å­˜æ—¶ï¼Œå®ƒä¼šåŒ¹é…è¶³å¤Ÿå¤§ï¼Œä¸”æœ€æ¥è¿‘çš„è§„æ ¼ã€‚</p>
<h4 id="ç¤ºä¾‹1ï¼šå…ƒç´ ä¸ºint32ç±»å‹çš„åˆ‡ç‰‡"><a href="#ç¤ºä¾‹1ï¼šå…ƒç´ ä¸ºint32ç±»å‹çš„åˆ‡ç‰‡" class="headerlink" title="ç¤ºä¾‹1ï¼šå…ƒç´ ä¸ºint32ç±»å‹çš„åˆ‡ç‰‡"></a>ç¤ºä¾‹1ï¼šå…ƒç´ ä¸ºint32ç±»å‹çš„åˆ‡ç‰‡</h4><figure class="highlight go"><figcaption><span>11_slice_test.go</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestSliceCapGrowthRules1</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	s := []<span class="keyword">int32</span>&#123;<span class="number">1</span>, <span class="number">2</span>&#125;</span><br><span class="line">	t.Log(<span class="built_in">len</span>(s), <span class="built_in">cap</span>(s))</span><br><span class="line"></span><br><span class="line">	s = <span class="built_in">append</span>(s, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">	t.Log(<span class="built_in">len</span>(s), <span class="built_in">cap</span>(s))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><figcaption><span>11_slice_test.go</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">=== RUN   TestSliceCapGrowthRules1</span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">65</span>: <span class="number">2</span> <span class="number">2</span></span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">68</span>: <span class="number">5</span> <span class="number">8</span></span><br><span class="line">--- PASS: TestSliceCapGrowthRules1 (<span class="number">0.00</span>s)</span><br></pre></td></tr></table></figure>

<ol>
<li>cap(2 + 3) &gt; doublecap(2 * 2) ï¼Œæ‰€ä»¥é¢„ä¼°æ–°å®¹é‡ä¸º5ã€‚</li>
<li>int32 å ç”¨ 4 byteï¼Œæ€»å†…å­˜å ç”¨ä¸º 5 * 4=20 byteï¼Œåˆ™ runtime å®é™…åˆ†é…çš„å†…å­˜ä¸º 32 byteï¼Œæœ€ç»ˆçš„å®¹é‡ä¸º 32 / 4ï¼ˆæ¯ä¸ª int 32 å ç”¨å¤§å°ï¼‰ = 8ã€‚</li>
</ol>
<h4 id="ç¤ºä¾‹2ï¼šå…ƒç´ ä¸ºint64ç±»å‹çš„åˆ‡ç‰‡"><a href="#ç¤ºä¾‹2ï¼šå…ƒç´ ä¸ºint64ç±»å‹çš„åˆ‡ç‰‡" class="headerlink" title="ç¤ºä¾‹2ï¼šå…ƒç´ ä¸ºint64ç±»å‹çš„åˆ‡ç‰‡"></a>ç¤ºä¾‹2ï¼šå…ƒç´ ä¸ºint64ç±»å‹çš„åˆ‡ç‰‡</h4><p>å¦‚æœå°†ä¸Šé¢ä¾‹å­çš„ int32 æ”¹ä¸º int64ï¼Œå¾—åˆ°çš„ç»“æœä¼šæ˜¯æ€æ ·çš„å‘¢ï¼Ÿ</p>
<ol>
<li>cap(2 + 3) &gt; doublecap(2 * 2)ï¼Œæ‰€ä»¥é¢„ä¼°æ–°å®¹é‡ä¸º5ã€‚</li>
<li>int64 å ç”¨ 8 byteï¼Œæ€»å†…å­˜ 5 * 8 = 40 byteï¼Œruntime å®é™…åˆ†é… 48 byteï¼Œ48 / 8 = 6ã€‚</li>
</ol>
<h4 id="ç¤ºä¾‹3ï¼šappendå¦ä¸€ä¸ªåˆ‡ç‰‡"><a href="#ç¤ºä¾‹3ï¼šappendå¦ä¸€ä¸ªåˆ‡ç‰‡" class="headerlink" title="ç¤ºä¾‹3ï¼šappendå¦ä¸€ä¸ªåˆ‡ç‰‡"></a>ç¤ºä¾‹3ï¼šappendå¦ä¸€ä¸ªåˆ‡ç‰‡</h4><figure class="highlight go"><figcaption><span>11_slice_test.go</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestSliceCapGrowthRules3</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	a := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">20</span>)</span><br><span class="line">	t.Log(<span class="built_in">len</span>(a), <span class="built_in">cap</span>(a))</span><br><span class="line"></span><br><span class="line">	b := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">42</span>)</span><br><span class="line">	t.Log(<span class="built_in">len</span>(b), <span class="built_in">cap</span>(b))</span><br><span class="line"></span><br><span class="line">	a = <span class="built_in">append</span>(a, b...)</span><br><span class="line">	t.Log(<span class="built_in">len</span>(a), <span class="built_in">cap</span>(a))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>å‰é¢zæ€»ç»“è¿‡â€œ<strong>åˆå§‹åŒ–åçš„åˆ‡ç‰‡ï¼Œcapacityç­‰äºlen</strong>â€ï¼Œcap(20 + 42) &gt; doublecap(2 * 20)ï¼Œå› æ­¤é¢„ä¼°æ–°å®¹é‡ä¸º62ã€‚</li>
<li>ç”±äºæˆ‘æ˜¯åœ¨64ä½çš„æœºå™¨ä¸Šè¿è¡Œçš„ï¼Œå› æ­¤intä¸ºint64ï¼Œint64å 8ä¸ªå­—èŠ‚ï¼Œæ‰€ä»¥æ€»å†…å­˜ä¸º 62 * 8 = 496ï¼Œåœ¨å†…å­˜è§„æ ¼ä¸­ä¼šé€‰æ‹©512ï¼Œæ‰€ä»¥æ–°å®¹é‡ä¸º 512 / 8 = 64ã€‚</li>
</ol>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">=== RUN   TestSliceCapGrowthRules3</span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">81</span>: <span class="number">20</span> <span class="number">20</span></span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">84</span>: <span class="number">42</span> <span class="number">42</span></span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">87</span>: <span class="number">62</span> <span class="number">64</span></span><br><span class="line">--- PASS: TestSliceCapGrowthRules3 (<span class="number">0.00</span>s)</span><br></pre></td></tr></table></figure>

<h4 id="ç¤ºä¾‹4ï¼šå…ƒç´ ä¸ºstringçš„åˆ‡ç‰‡"><a href="#ç¤ºä¾‹4ï¼šå…ƒç´ ä¸ºstringçš„åˆ‡ç‰‡" class="headerlink" title="ç¤ºä¾‹4ï¼šå…ƒç´ ä¸ºstringçš„åˆ‡ç‰‡"></a>ç¤ºä¾‹4ï¼šå…ƒç´ ä¸ºstringçš„åˆ‡ç‰‡</h4><figure class="highlight go"><figcaption><span>11_slice_test.go</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestSliceCapGrowthRules4</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> s <span class="keyword">string</span></span><br><span class="line">	t.Log(unsafe.Sizeof(s))</span><br><span class="line"></span><br><span class="line">	a := []<span class="keyword">string</span>&#123;<span class="string">&quot;My&quot;</span>, <span class="string">&quot;name&quot;</span>, <span class="string">&quot;is&quot;</span>&#125;</span><br><span class="line">	t.Log(<span class="built_in">len</span>(a), <span class="built_in">cap</span>(a))</span><br><span class="line"></span><br><span class="line">	a = <span class="built_in">append</span>(a, <span class="string">&quot;jason&quot;</span>)</span><br><span class="line">	t.Log(<span class="built_in">len</span>(a), <span class="built_in">cap</span>(a))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>cap(3 + 1) &lt; doublecap(2 * 3)ï¼Œå› æ­¤é¢„ä¼°æ–°å®¹é‡ä¸º6ã€‚</li>
<li>64ä½ä¸‹stringå 16ä¸ªå­—èŠ‚ï¼Œæ€»å†…å­˜ä¸º 6 * 16 = 96 byteï¼ŒåŒ¹é…åˆ°çš„å†…å­˜è§„æ ¼ä¸º96å­—èŠ‚ï¼Œæ‰€ä»¥æœ€ç»ˆæ‰©å®¹åå®¹é‡ä¸º 96 / 16 = 6ã€‚</li>
</ol>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">=== RUN   TestSliceCapGrowthRules4</span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">102</span>: <span class="number">16</span></span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">105</span>: <span class="number">3</span> <span class="number">3</span></span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">108</span>: <span class="number">4</span> <span class="number">6</span></span><br><span class="line">--- PASS: TestSliceCapGrowthRules4 (<span class="number">0.00</span>s)</span><br></pre></td></tr></table></figure>

<h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><pre class="mermaid">graph TB
a[æ–°åˆ‡ç‰‡len > æ—§åˆ‡ç‰‡cap] --> |æ˜¯|b(æ‰©å®¹)
a --> |å¦|b1(ä¸æ‰©å®¹)
b --> c[é¢„ä¼°æ–°å®¹é‡newcap]

c --> d{æ–°åˆ‡ç‰‡å®¹é‡æœ€å°å€¼ > 2å€æ—§å®¹é‡}
d --> |æ˜¯| e[newcap = æ–°åˆ‡ç‰‡å®¹é‡æœ€å°å€¼]
d --> |å¦| e1{æ—§åˆ‡ç‰‡é•¿åº¦å°äº1024}
e1 --> |æ˜¯| f[newcap = 2å€æ—§å®¹é‡]
e1 --> |å¦| f1[æ–°åˆ‡ç‰‡åœ¨æ—§åˆ‡ç‰‡å®¹é‡ä¸Šæ¯æ¬¡å¢é•¿25%</br>ç›´åˆ°newcap >= æ–°åˆ‡ç‰‡å®¹é‡çš„æœ€å°å€¼]

e --> g[å†…å­˜å¯¹é½]
f --> g
f1 --> g

g --> h[é¢„ä¼°å†…å­˜å ç”¨ = é¢„ä¼°å®¹é‡ * å…ƒç´ ç±»å‹å¤§å°]
h --> i[åŒ¹é…åˆ°runtimeç”³è¯·çš„å†…å­˜è§„æ ¼å¯¹åº”çš„å†…å­˜]
i --> j[newcap = åŒ¹é…åˆ°çš„å†…å­˜ / å…ƒç´ ç±»å‹å¤§å°]

classDef mainStep fill:#02d7f2,color:#000
class c,g mainStep</pre>



<h3 id="åˆ‡ç‰‡å…±äº«å­˜å‚¨ç»“æ„"><a href="#åˆ‡ç‰‡å…±äº«å­˜å‚¨ç»“æ„" class="headerlink" title="åˆ‡ç‰‡å…±äº«å­˜å‚¨ç»“æ„"></a>åˆ‡ç‰‡å…±äº«å­˜å‚¨ç»“æ„</h3><p>åˆ‡ç‰‡æ˜¯ä¸€ä¸ª<strong>å…±äº«å­˜å‚¨ç»“æ„</strong>ã€‚<br>è¿˜æ˜¯ç”¨ä»£ç è¯´è¯ï¼š</p>
<figure class="highlight go"><figcaption><span>11_slice_test.go</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestSliceShareMemory</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	year := []<span class="keyword">string</span>&#123;<span class="string">&quot;Ja&quot;</span>, <span class="string">&quot;Feb&quot;</span>, <span class="string">&quot;Mar&quot;</span>, <span class="string">&quot;Apr&quot;</span>, <span class="string">&quot;May&quot;</span>, <span class="string">&quot;Jun&quot;</span>, <span class="string">&quot;Jul&quot;</span>, <span class="string">&quot;Aug&quot;</span>, <span class="string">&quot;Sep&quot;</span>, <span class="string">&quot;Oct&quot;</span>, <span class="string">&quot;Nov&quot;</span>, <span class="string">&quot;Dec&quot;</span>&#125;</span><br><span class="line">	t.Log(year, <span class="built_in">len</span>(year), <span class="built_in">cap</span>(year))</span><br><span class="line"></span><br><span class="line">	summer := year[<span class="number">4</span>:<span class="number">7</span>]</span><br><span class="line">	<span class="comment">// ä¸ºä»€ä¹ˆsummerçš„capacityæ˜¯8å‘¢ï¼Ÿ</span></span><br><span class="line">	<span class="comment">// è™½ç„¶æˆªå–åˆ°ç´¢å¼•6ä¸ºæ­¢ï¼Œä½†æ˜¯summeræ˜¯æŒ‡å‘è¿ç»­çš„å­˜å‚¨ç©ºé—´yearï¼Œä¹Ÿå°±æ˜¯ä»yearç´¢å¼•4å¼€å§‹åˆ°yearæœ€åä¸€ä¸ªå…ƒç´ çš„è¿™ä¸€æ®µè¿ç»­ç©ºé—´</span></span><br><span class="line">	<span class="comment">// ä¹Ÿå°±æ˜¯ä»Mayåˆ°Decï¼Œæ€»å…±8ä¸ªï¼Œcapacityä¹Ÿå°±æ˜¯8ã€‚</span></span><br><span class="line">	<span class="comment">// å¦‚æœè¿˜è§‰å¾—å¾ˆç»•ï¼Œå¯ä»¥å…ˆè¿™æ ·è®°ï¼Œåé¢æˆ‘ä¹Ÿä¼šè®²åˆ°ï¼Œåˆ°æ—¶å€™è¿›ä¸€æ­¥æ¶ˆåŒ–ã€‚</span></span><br><span class="line">	t.Log(summer, <span class="built_in">len</span>(summer), <span class="built_in">cap</span>(summer))<span class="comment">// [May Jun Jul] 3 8</span></span><br><span class="line"></span><br><span class="line">	summer[<span class="number">0</span>] = <span class="string">&quot;Unknown&quot;</span></span><br><span class="line">	t.Log(summer, <span class="built_in">len</span>(summer), <span class="built_in">cap</span>(summer))</span><br><span class="line">	t.Log(year, <span class="built_in">len</span>(year), <span class="built_in">cap</span>(year))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">=== RUN   TestSliceShareMemory</span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">46</span>: [Ja Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec] <span class="number">12</span> <span class="number">12</span></span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">53</span>: [May Jun Jul] <span class="number">3</span> <span class="number">8</span></span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">56</span>: [Unknown Jun Jul] <span class="number">3</span> <span class="number">8</span></span><br><span class="line">    <span class="number">11</span>_slice_test.<span class="keyword">go</span>:<span class="number">57</span>: [Ja Feb Mar Apr Unknown Jun Jul Aug Sep Oct Nov Dec] <span class="number">12</span> <span class="number">12</span></span><br><span class="line">--- PASS: TestSliceShareMemory (<span class="number">0.00</span>s)</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡è¾“å‡ºç»“æœå¯ä»¥å¾—çŸ¥ï¼šåˆ‡ç‰‡<strong>æ˜¯å¼•ç”¨ç±»å‹</strong>ã€‚</p>
<h2 id="æ•°ç»„å’Œåˆ‡ç‰‡çš„åŒºåˆ«"><a href="#æ•°ç»„å’Œåˆ‡ç‰‡çš„åŒºåˆ«" class="headerlink" title="æ•°ç»„å’Œåˆ‡ç‰‡çš„åŒºåˆ«"></a>æ•°ç»„å’Œåˆ‡ç‰‡çš„åŒºåˆ«</h2><table>
<thead>
<tr>
<th></th>
<th>å®¹é‡</th>
<th>æ•°ç»„ä¹‹é—´æ¯”è¾ƒ</th>
<th>ç±»å‹</th>
</tr>
</thead>
<tbody><tr>
<td>æ•°ç»„</td>
<td>ä¸å¯ä¼¸ç¼©</td>
<td>å¯æ¯”è¾ƒ</td>
<td>å€¼ç±»å‹</td>
</tr>
<tr>
<td>åˆ‡ç‰‡</td>
<td>å¯ä¼¸ç¼©</td>
<td>ä¸å¯æ¯”è¾ƒ</td>
<td>å¼•ç”¨ç±»å‹</td>
</tr>
</tbody></table>
<p>ä¸ºäº†é˜²æ­¢ç¯‡å¹…è¿‡é•¿ï¼Œè¿™é‡Œåªç”¨ä»£ç æ¼”ç¤ºä¸‹åˆ‡ç‰‡çš„æ¯”è¾ƒï¼Œåé¢æˆ‘ä¼šæŠ½æ—¶é—´å…·ä½“è®²è§£ä¸‹ã€‚</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestSliceComparing</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	a := []<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line">	b := []<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line">	<span class="comment">// è¯­æ³•æŠ¥é”™ï¼šInvalid operation: a == b (operator == is not defined on []int)</span></span><br><span class="line">	<span class="comment">// ç¼–è¯‘æ—¶æŠ¥é”™ï¼šinvalid operation: a == b (slice can only be compared to nil)</span></span><br><span class="line">	<span class="comment">//if a == b &#123;</span></span><br><span class="line">	<span class="comment">//	t.Log(&quot;equal&quot;)</span></span><br><span class="line">	<span class="comment">//&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/yahuian/p/go-slice-grow.html">Go slice æ‰©å®¹æœºåˆ¶åˆ†æ</a></li>
<li><a target="_blank" rel="noopener" href="https://yqqy.top/golang-slice-expand-capacity/">ç»ˆäºç†è§£äº†Sliceæ‰©å®¹æœºåˆ¶</a></li>
<li><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1CV411d7W8">ã€Golangã€‘sliceç±»å‹å­˜ä»€ä¹ˆï¼Ÿmakeå’Œnewï¼Ÿsliceå’Œæ•°ç»„ï¼Ÿæ‰©å®¹è§„åˆ™ï¼Ÿ</a></li>
</ul>
</div><div class="article-licensing box"><div class="licensing-title"><p>11ã€ŠGoè¯­è¨€å…¥é—¨ã€‹æ•°ç»„å’Œåˆ‡ç‰‡</p><p><a href="https://ganzhixiong.com/p/53ed3754/">https://ganzhixiong.com/p/53ed3754/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>Author</h6><p>å¹²å¿—é›„</p></div></div><div class="level-item is-narrow"><div><h6>Posted on</h6><p>2021-01-19</p></div></div><div class="level-item is-narrow"><div><h6>Updated on</h6><p>2021-09-14</p></div></div><div class="level-item is-narrow"><div><h6>Licensed under</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/Go/">Go</a><a class="link-muted mr-2" rel="tag" href="/tags/Slice/">Slice</a></div><!--!--></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">Like this article? Support the author with</h3><div class="buttons is-centered"><a class="button donate" data-type="alipay"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>Alipay</span><span class="qrcode"><img src="https://cdn.jsdelivr.net/gh/ganzhixiong/img/blog/alipay.png" alt="Alipay"></span></a><a class="button donate" data-type="wechat"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>Wechat</span><span class="qrcode"><img src="https://cdn.jsdelivr.net/gh/ganzhixiong/img/blog/wechat-pay.png" alt="Wechat"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/p/448598ca/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">Git LFSä½¿ç”¨é‡åˆ°çš„é—®é¢˜</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/p/204165a4/"><span class="level-item">10ã€ŠGoè¯­è¨€å…¥é—¨ã€‹å¾ªç¯å’Œæ¡ä»¶</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">Comments</h3><div id="comment-container"></div><link rel="stylesheet" href="/css/gitalk.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.js"></script><script>var gitalk = new Gitalk({
            id: "52c33ee6757038ed2a48441267018094",
            repo: "ganzhixiong.github.io",
            owner: "ganzhixiong",
            clientID: "65ecdc2420620ea7e91a",
            clientSecret: "5726f76dd701eb327f588948509861c91390d101",
            admin: ["ganzhixiong"],
            createIssueManually: false,
            distractionFreeMode: false,
            perPage: 20,
            pagerDirection: "last",
            
            
            enableHotKey: true,
            language: "zh-CN",
        })
        gitalk.render('comment-container')</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">Catalogue</h3><ul class="menu-list"><li><a class="level is-mobile" href="#æ•°ç»„"><span class="level-left"><span class="level-item">1</span><span class="level-item">æ•°ç»„</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#æ•°ç»„çš„å£°æ˜"><span class="level-left"><span class="level-item">1.1</span><span class="level-item">æ•°ç»„çš„å£°æ˜</span></span></a></li><li><a class="level is-mobile" href="#éå†æ•°ç»„"><span class="level-left"><span class="level-item">1.2</span><span class="level-item">éå†æ•°ç»„</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#forå¾ªç¯"><span class="level-left"><span class="level-item">1.2.1</span><span class="level-item">forå¾ªç¯</span></span></a></li><li><a class="level is-mobile" href="#foreachå¾ªç¯"><span class="level-left"><span class="level-item">1.2.2</span><span class="level-item">foreachå¾ªç¯</span></span></a></li></ul></li><li><a class="level is-mobile" href="#æ•°ç»„æˆªå–"><span class="level-left"><span class="level-item">1.3</span><span class="level-item">æ•°ç»„æˆªå–</span></span></a></li></ul></li><li><a class="level is-mobile" href="#åˆ‡ç‰‡"><span class="level-left"><span class="level-item">2</span><span class="level-item">åˆ‡ç‰‡</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#åˆ‡ç‰‡å†…éƒ¨ç»“æ„"><span class="level-left"><span class="level-item">2.1</span><span class="level-item">åˆ‡ç‰‡å†…éƒ¨ç»“æ„</span></span></a></li><li><a class="level is-mobile" href="#capacityå¢é•¿è§„åˆ™"><span class="level-left"><span class="level-item">2.2</span><span class="level-item">capacityå¢é•¿è§„åˆ™</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#ç¬¬ä¸€æ­¥ï¼Œé¢„ä¼°æ–°å®¹é‡"><span class="level-left"><span class="level-item">2.2.1</span><span class="level-item">ç¬¬ä¸€æ­¥ï¼Œé¢„ä¼°æ–°å®¹é‡</span></span></a></li><li><a class="level is-mobile" href="#ç¬¬äºŒæ­¥ï¼Œå†…å­˜å¯¹é½"><span class="level-left"><span class="level-item">2.2.2</span><span class="level-item">ç¬¬äºŒæ­¥ï¼Œå†…å­˜å¯¹é½</span></span></a></li><li><a class="level is-mobile" href="#ç¤ºä¾‹1ï¼šå…ƒç´ ä¸ºint32ç±»å‹çš„åˆ‡ç‰‡"><span class="level-left"><span class="level-item">2.2.3</span><span class="level-item">ç¤ºä¾‹1ï¼šå…ƒç´ ä¸ºint32ç±»å‹çš„åˆ‡ç‰‡</span></span></a></li><li><a class="level is-mobile" href="#ç¤ºä¾‹2ï¼šå…ƒç´ ä¸ºint64ç±»å‹çš„åˆ‡ç‰‡"><span class="level-left"><span class="level-item">2.2.4</span><span class="level-item">ç¤ºä¾‹2ï¼šå…ƒç´ ä¸ºint64ç±»å‹çš„åˆ‡ç‰‡</span></span></a></li><li><a class="level is-mobile" href="#ç¤ºä¾‹3ï¼šappendå¦ä¸€ä¸ªåˆ‡ç‰‡"><span class="level-left"><span class="level-item">2.2.5</span><span class="level-item">ç¤ºä¾‹3ï¼šappendå¦ä¸€ä¸ªåˆ‡ç‰‡</span></span></a></li><li><a class="level is-mobile" href="#ç¤ºä¾‹4ï¼šå…ƒç´ ä¸ºstringçš„åˆ‡ç‰‡"><span class="level-left"><span class="level-item">2.2.6</span><span class="level-item">ç¤ºä¾‹4ï¼šå…ƒç´ ä¸ºstringçš„åˆ‡ç‰‡</span></span></a></li><li><a class="level is-mobile" href="#æ€»ç»“"><span class="level-left"><span class="level-item">2.2.7</span><span class="level-item">æ€»ç»“</span></span></a></li></ul></li><li><a class="level is-mobile" href="#åˆ‡ç‰‡å…±äº«å­˜å‚¨ç»“æ„"><span class="level-left"><span class="level-item">2.3</span><span class="level-item">åˆ‡ç‰‡å…±äº«å­˜å‚¨ç»“æ„</span></span></a></li></ul></li><li><a class="level is-mobile" href="#æ•°ç»„å’Œåˆ‡ç‰‡çš„åŒºåˆ«"><span class="level-left"><span class="level-item">3</span><span class="level-item">æ•°ç»„å’Œåˆ‡ç‰‡çš„åŒºåˆ«</span></span></a></li><li><a class="level is-mobile" href="#å‚è€ƒ"><span class="level-left"><span class="level-item">4</span><span class="level-item">å‚è€ƒ</span></span></a></li></ul></div></div><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-04-13T01:59:27.000Z">2022-04-13</time></p><p class="title"><a href="/p/83f35d67/">å¦‚ä½•å®‰è£… .NET Framework 4.0 ç›®æ ‡åŒ…ï¼Ÿ</a></p><p class="categories"><a href="/categories/Tools/">Tools</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-04-12T13:19:38.000Z">2022-04-12</time></p><p class="title"><a href="/p/cf1fabff/">Rider Build æŠ¥é”™ï¼šæ‰¾ä¸åˆ°å¯¼å…¥çš„é¡¹ç›®â€œC:\***\Microsoft.CSharp.Core.targetsâ€ã€‚è¯·ç¡®è®¤ Import å£°æ˜â€œC:\***\Microsoft.CSharp.Core.targetsâ€ä¸­çš„è¡¨è¾¾å¼æ­£ç¡®ï¼Œä¸”æ–‡ä»¶ä½äºç£ç›˜ä¸Šã€‚</a></p><p class="categories"><a href="/categories/Tools/">Tools</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-04-11T15:12:11.000Z">2022-04-11</time></p><p class="title"><a href="/p/82d9a17b/">å¦‚ä½•å°† iPhone æˆ– iPad ä¸­çš„ç…§ç‰‡å¯¼å…¥åˆ° Macï¼Ÿ</a></p><p class="categories"><a href="/categories/Mac/">Mac</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-04-07T10:02:37.000Z">2022-04-07</time></p><p class="title"><a href="/p/cd3bf6d7/">Mac Studio è¿˜æœªæ”¶åˆ°ï¼ŒæƒŠå–œå´æå‰åˆ°äº†</a></p><p class="categories"><a href="/categories/Mac/">Mac</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-03-29T13:47:38.000Z">2022-03-29</time></p><p class="title"><a href="/p/e4f8357e/">Rider æ‰“å¼€ UNC è·¯å¾„çš„æ–‡ä»¶  Structure is empty</a></p><p class="categories"><a href="/categories/Tools/">Tools</a></p></div></article></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">ğŸ¤Ÿ Gan&#039;s Blog ğŸ¸</a><p class="is-size-7"><span>&copy; 2022 å¹²å¿—é›„</span>Â Â Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>Â &amp;Â <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p><a class="is-size-7" href="http://beian.miit.gov.cn/" target="_blank"> ç²¤ICPå¤‡2021124782å·</a></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="å¹²å¿—é›„çš„GitHub" href="https://github.com/ganzhixiong"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><script src="https://cdn.jsdelivr.net/npm/mermaid@8.11.0/dist/mermaid.min.js"></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">Ã—</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>